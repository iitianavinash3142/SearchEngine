'''Attribute clash''' (also known as '''colour clash''' or '''bleeding''') was a display artifact caused by limits in the graphics circuitry of a number of early colour 8-bit [[home computer]]s, most notably the [[Sinclair Research]] [[ZX Spectrum]], where it meant that only two colours could be used in any area of 8×8 pixels. Programmer workarounds to prevent this limit from becoming apparent have since been considered an element of Spectrum user culture. 

==Causes==
Attribute clash on the ZX Spectrum was caused by its idiosyncratic display memory layout, designed in such a way as to minimise memory use of the [[frame buffer]], and optimise for text display instead of graphics. Rather than limit the colour palette to conserve memory, Sinclair's design stored [[pixel]] [[bitmap]] and colour information in separate areas of memory. While the bitmap specified the state of individual pixels (either on or off), the colour information (or "attributes") corresponded to the text character matrix &mdash; 24 rows of 32 columns &mdash; with one [[byte]] per 8x8 pixel character cell. This byte encoded two 3-bit values, known as ''INK'' (foreground colour) and ''PAPER'' (background colour) after the [[BASIC]] instructions used to define the colour values. Two other binary values were included in an attribute; a ''BRIGHT'' bit indicating one of two brightness levels for the two colours, and a ''FLASH'' bit, which, when set, caused the two colours to be swapped at regular intervals. This scheme provided 15 different colours: the eight combinations of red, green and blue at two brightness levels (except for black, which appeared the same at both brightness). Thus, each 8x8 pixel block could only contain 2 colours from the 15 available, which must both be from either the BRIGHT or non-BRIGHT halves of the palette. Trying to add a third colour in an 8x8 pixel area would result in the three colors being reduced to two by the ZX Spectrum. 

The ZX Spectrum used 6144 bytes for pixel information, with one byte representing a row of eight pixels, and 768 bytes used for the colour attributes, thus giving a total of 6912 bytes for the entire graphics display, a relatively small total for a computer of the Spectrum's era with "colour" capabilities. This graphics architecture was retained right through to Sinclair and [[Amstrad]]'s later redesigns of the Spectrum, up until Amstrad's final model, the ZX Spectrum +3, despite subsequent models having contained 128 kB of RAM, reducing the need to save memory in this manner. The architecture was retained to prevent loss of [[backwards compatibility]].

Attributes were used by a variety of other computers and consoles, including the [[Commodore 64]], the [[MSX]] and [[Nintendo Entertainment System|NES]], although the size of the attribute blocks and the number of colours per block varied. However, with the use of hardware [[sprite (computer graphics)|sprites]] and [[scrolling]], attribute clash could be avoided.

The [[Thomson MO5]] and [[Thomson TO7|TO7]] microcomputers, the [[Tangerine_Computer_Systems#Oric-1|Oric 1]], the [[MSX#MSX 1|MSX 1]] [[computer architecture|architecture]], and other systems based on the [[Texas Instruments TMS9918]] [[Video Display Controller]] display a very similar constraint: for each group of eight pixels horizontally, only two colours out of 16 are available. giving a similar but less severe effect than with the Spectrum.  The MSX 1 did not have just one single color attribute byte available for a whole 8x8 pixel area, as was the case with the Sinclair Spectrum, but eight, one attribute byte for each 8×1 pixel area.  Thus, while the Spectrum was limited to one color pair for a square area of 8x8 pixels, the MSX 1 was only limited to one color pair for a "line" of eight adjacent pixels. In addition MSX1 could use [[Sprite (computer graphics)|sprites]] which were not bound to any attribute clash problems (although MSX 1 sprites did have their own limitations). 

In practice this technical advantage often did not help MSX 1 systems to produce better pictures. The problem for the MSX 1 was that many European software companies who converted Spectrum games to MSX 1 ignored all the improvements the MSX 1 had over the Spectrum, and thus the resulting MSX 1 versions had the same amount of attribute clash as the original Spectrum games. To ease conversion, the software developers simply copied the single attribute byte value of the Spectrum to all eight corresponding attribute bytes of the MSX 1. For the same reason, the software companies also ignored the sprite capabilities of the MSX 1, and because the video display capabilities were otherwise quite similar (256×192 resolution, 16 colors), both systems produced virtually identical displays for the same game. In contrast, Japanese MSX 1 games did use all the capabilities of MSX 1, often resulting in better looking games.

==Effects==
To avoid attribute clash, static graphic displays had to be constructed with care. Finely-detailed colour graphics were impossible, as colour could only be applied in 8×8 pixel blocks. Careful design could achieve impressive results, as could synchronizing colour changes to the refresh rate of the display &mdash; usually a television set.

However, animated displays were more difficult &mdash; a distinct drawback in a machine whose primary use was playing [[video game]]s. If just one pixel in an 8×8 block was recoloured because a moving part of the display touched it, the entire block would change colour. Thus detailed moving graphics caused large ugly fringes of rapidly-changing colours to follow them around.

==Workarounds==
Early software simply ignored the problem. Later, the standard workaround was to use colour for static display elements &mdash; such as a decorative border around the edges of the screen, which might include score displays and so on, or some form of instrumentation &mdash; with a smaller central [[monochrome]] area containing all the animated graphics. This also made graphics faster, as less of the screen had to be updated &mdash; both a smaller region, plus only changing pixel information and leaving the colour area untouched.

Some late Spectrum software, such as FTL's ''[[Lightforce (video game)|Lightforce]]'', used extremely careful graphics design to achieve full-colour moving graphics, essentially by limiting both the design of the onscreen elements and their paths of motion to 8×8 colour resolution boundaries. The moving elements were thus relatively large and rather blocky or squarish, and their movement was constrained, but this was not visually obvious and the sight of moving full-colour graphics was hugely impressive to Spectrum owners.

No mainstream developers were able to find a suitable all-round fix for the attribute clash problem, instead preferring to use the monochrome graphics method when fast, clear graphics were needed, and full-colour graphics when the situation permitted.

It was possible by paying careful attention to timing to modify the attribute area of RAM at certain specific times as the display was drawn - let the display hardware draw one line of the display, then change the attribute RAM before the next line is drawn to give the effect of different attributes for each individual line. These changes had to be done in software and were time-consuming to program, meaning that this technique was usually limited to special effects. This technique was also very popular in the demoscene.

==Screenshots showing the problem and solutions==
{| class="wikitable"
|- bgcolor="#CCCCCC"
|-
| Most illustrative of the problem were games pre-1987 that ignored attribute clash, such as shown here by the game ''[[Knight Tyme]]''. Note how the central character (the small figure with a knight's helmet just to the right of the green plant) is almost hidden by the attribute clash that has occurred. ''Knight Tyme'' was one of the few games that let players select between two modes of attribute clash: one which ignored main character attributes (producing the shown effect), and one which applied main character attributes, turning any graphics surrounding the character white. || [[Image:Knight tyme attribute clash.png|center|256px]]
|-
| One workaround was to simply render the graphics in two colours, otherwise known as monochrome, as shown here with the Spectrum version of ''[[Knight Lore]]'' in 1984. || [[Image:Knight_lore_3.gif|center|256px]]
|-
| Many games used full-colour backgrounds and "character scrolling" (where the environment was scrolled eight pixels at a time), but monochrome sprites that were effectively transparent, as displayed here in ''[[Double Dragon (arcade game)|Double Dragon]]''. The sprites in this case were drawn in such a way so they stand out, avoiding dependence on colour. Many games used this method with smooth pixel-by-pixel scrolling, but the attribute clash as elements of one character block were "passed" to the next were clearly visible. || [[Image:Spectrum Double Dragon.png|320px]]
|-
| A prominent (and less successful) example of the use of full-colour graphics was the Spectrum conversion of ''[[Altered Beast]]''. Note that the game suffers from considerable attribute clash. || [[Image:Spectrum Altered Beast.png|320px]]
|-
| Programmer [[Don Priestley]] developed a distinctive style for several of his games by using large, cartoon-like sprites which were carefully designed to span whole character blocks without appearing unduly square. A disadvantage of this technique was that the gameplay had to be designed around the graphics, and so it was not useful for [[porting|ports]] from other platforms. Games that used this technique included ''Popeye'', ''[[The Trap Door (game)|The Trap Door]]'' (shown right), ''Through the Trapdoor'', and ''[[Flunky (computer game)|Flunky]]''. Other developers who used a similar technique included [[Mike Singleton]], with ''[[Dark Sceptre]]'', and Gang of Five, with ''[[Dan Dare: Pilot of the Future]]''. || [[Image:ZX trapdoor1.png|320px]].
|-
|}

==References==
* [http://www.worldofspectrum.org/faq/reference/reference.htm comp.sys.sinclair FAQ: Reference]

[[Category:Computer graphic artifacts]]
[[Category:ZX Spectrum]]

